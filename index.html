<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NextFlix</title>

<link href="https://fonts.googleapis.com/css2?family=Netflix+Sans:wght@300;400;700;900&display=swap" rel="stylesheet">

<style>
:root{--red:#e50914;--bg:#141414}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:#fff;font-family:'Netflix Sans',Arial,sans-serif;overflow-x:hidden}

/* HEADER */
header{
  position:fixed;top:0;left:0;right:0;
  display:flex;justify-content:space-between;align-items:center;
  padding:16px 48px;z-index:100;transition:.4s
}
header.scrolled{background:rgba(0,0,0,.9);backdrop-filter:blur(6px)}
.logo{font-size:28px;font-weight:900;color:var(--red)}
.search input{
  background:rgba(255,255,255,.15);border:none;color:#fff;
  padding:8px 18px;border-radius:20px;outline:none
}

/* HERO */
.hero{height:100vh;background-size:cover;background-position:center;position:relative}
.hero::after{
  content:'';position:absolute;inset:0;
  background:linear-gradient(to top,#141414 15%,rgba(20,20,20,.75) 45%,rgba(20,20,20,.35) 70%,rgba(0,0,0,.15))
}
.hero-video{position:absolute;inset:0;z-index:-1;overflow:hidden}
.hero-video iframe{width:100%;height:100%;pointer-events:none}
.hero-content{
  position:absolute;bottom:25%;left:48px;max-width:600px
}
.hero h1{font-size:48px;font-weight:900;text-shadow:0 4px 12px rgba(0,0,0,.85)}
.hero p{margin:12px 0 20px;color:#e5e5e5;text-shadow:0 3px 8px rgba(0,0,0,.85)}
.hero-buttons button{
  padding:10px 26px;border:none;border-radius:4px;
  font-size:16px;font-weight:700;margin-right:10px;cursor:pointer
}
.play{background:#fff;color:#000}
.info{background:rgba(109,109,110,.85);color:#fff}

/* CONTENT */
.content{margin-top:-120px;padding-bottom:80px}
.row-title{font-size:20px;font-weight:700;margin:40px 0 14px 48px}
.row{display:flex;gap:10px;padding-left:48px;overflow-x:auto}
.row::-webkit-scrollbar{display:none}

/* CARD */
.card{position:relative;min-width:180px;transition:.25s}
.card img,.card iframe{width:100%;border-radius:4px}
.preview-frame{position:absolute;inset:0;display:none;background:#000}
.card:hover{transform:scale(1.25);z-index:10}
.card:hover .preview-frame{display:block}
.card-info{
  position:absolute;bottom:0;inset-inline:0;
  background:linear-gradient(to top,#000,transparent);
  padding:10px;font-size:14px;opacity:0;transition:.25s
}
.card:hover .card-info{opacity:1}

/* MODAL */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center;z-index:200}
.modal-box{width:90%;max-width:900px;background:#181818;border-radius:8px}
.modal iframe{width:100%;height:480px;border:none}
.close{text-align:right;padding:10px;color:var(--red);font-weight:700;cursor:pointer}

/* SKELETON */
.skeleton{
  background:linear-gradient(90deg,#222 25%,#333 37%,#222 63%);
  background-size:400% 100%;animation:shimmer 1.4s infinite;border-radius:4px
}
@keyframes shimmer{0%{background-position:100%}100%{background-position:0}}

/* BOTTOM NAV */
.bottom-nav{display:none}
@media(max-width:768px){
  header{padding:12px 20px}
  .hero-content{left:20px}
  .hero h1{font-size:32px}
  .row-title,.row{padding-left:20px}
  .card{min-width:140px}
  .hero-video,.preview-frame{display:none!important}
  .bottom-nav{
    position:fixed;bottom:0;left:0;right:0;
    background:#000;display:flex;justify-content:space-around;
    padding:10px 0;z-index:500
  }
  .bottom-nav div{color:#b3b3b3;font-size:11px;text-align:center}
}
</style>
</head>

<body>

<header id="header">
  <div class="logo">NextFlix</div>
  <div class="search"><input placeholder="Search"></div>
</header>

<section class="hero" id="hero">
  <div class="hero-video" id="heroVideo"></div>
  <div class="hero-content">
    <h1 id="heroTitle"></h1>
    <p id="heroDesc"></p>
    <div class="hero-buttons">
      <button class="play">‚ñ∂ Play</button>
      <button class="info" onclick="addToList()">Ôºã My List</button>
    </div>
  </div>
</section>

<section class="content">
  <div class="row-title">My List</div>
  <div class="row" id="mylist"></div>

  <div class="row-title">Trending Now</div>
  <div class="row" id="trending"></div>

  <div class="row-title">Popular TV Shows</div>
  <div class="row" id="tv"></div>
</section>

<div class="modal" id="modal">
  <div class="modal-box">
    <div class="close" onclick="closeModal()">CLOSE ‚úï</div>
    <iframe id="trailer" allowfullscreen></iframe>
  </div>
</div>

<nav class="bottom-nav">
  <div>üè†<br>Home</div>
  <div>üî•<br>New</div>
  <div>üîç<br>Search</div>
  <div>‚¨áÔ∏è<br>Downloads</div>
</nav>

<script>
const API='https://api.themoviedb.org/3';
const KEY='e2398c231ce18fffe583c2095fa7a930';
const IMG='https://image.tmdb.org/t/p/original';

let heroList=[],heroIndex=0;
let myList=JSON.parse(localStorage.getItem('mylist')||'[]');

window.addEventListener('scroll',()=>header.classList.toggle('scrolled',scrollY>50));

async function get(u){return(await fetch(u)).json();}

function showSkeleton(id,count=6){
  const r=document.getElementById(id);
  r.innerHTML='';
  for(let i=0;i<count;i++){
    const d=document.createElement('div');
    d.className='card skeleton';
    d.style.height='260px';
    r.appendChild(d);
  }
}

async function init(){
  showSkeleton('trending');
  showSkeleton('tv');

  const trend=await get(`${API}/trending/all/week?api_key=${KEY}`);
  heroList=trend.results.slice(0,6);
  renderHero();
  setInterval(()=>{heroIndex=(heroIndex+1)%heroList.length;renderHero()},8000);

  renderRow('trending',trend.results);
  renderRow('tv',(await get(`${API}/tv/popular?api_key=${KEY}`)).results);
  renderMyList();
}

async function renderHero(){
  const m=heroList[heroIndex];
  hero.style.backgroundImage=`url(${IMG+m.backdrop_path})`;
  heroTitle.textContent=m.title||m.name;
  heroDesc.textContent=m.overview||'';
  heroVideo.innerHTML='';

  if(window.innerWidth>768){
    const v=await get(`${API}/${m.first_air_date?'tv':'movie'}/${m.id}/videos?api_key=${KEY}`);
    const t=v.results.find(x=>x.site==='YouTube'&&x.type==='Trailer');
    if(t){
      heroVideo.innerHTML=`<iframe src="https://www.youtube.com/embed/${t.key}?autoplay=1&mute=1&controls=0&loop=1&playlist=${t.key}" allow="autoplay"></iframe>`;
    }
  }
}

async function renderRow(id,list){
  const r=document.getElementById(id);
  r.innerHTML='';
  for(const m of list){
    if(!m.poster_path) continue;
    const c=document.createElement('div');
    c.className='card';
    c.innerHTML=`
      <img src="${IMG+m.poster_path}">
      <div class="preview-frame"></div>
      <div class="card-info">${m.title||m.name}</div>
    `;
    c.addEventListener('mouseenter',async()=>{
      if(window.innerWidth<769) return;
      const v=await get(`${API}/${m.first_air_date?'tv':'movie'}/${m.id}/videos?api_key=${KEY}`);
      const t=v.results.find(x=>x.site==='YouTube'&&x.type==='Trailer');
      if(t){
        c.querySelector('.preview-frame').innerHTML=
          `<iframe src="https://www.youtube.com/embed/${t.key}?autoplay=1&mute=1&controls=0" allow="autoplay"></iframe>`;
      }
    });
    c.addEventListener('mouseleave',()=>c.querySelector('.preview-frame').innerHTML='');
    c.onclick=()=>openModal(m,!!m.first_air_date);
    r.appendChild(c);
  }
}

function addToList(){
  const m=heroList[heroIndex];
  if(!myList.find(x=>x.id===m.id)){
    myList.push(m);
    localStorage.setItem('mylist',JSON.stringify(myList));
    renderMyList();
  }
}

function removeFromList(id){
  myList=myList.filter(m=>m.id!==id);
  localStorage.setItem('mylist',JSON.stringify(myList));
  renderMyList();
}

function renderMyList(){
  const r=document.getElementById('mylist');
  r.innerHTML='';
  myList.forEach(m=>{
    const c=document.createElement('div');
    c.className='card';
    c.innerHTML=`
      <img src="${IMG+m.poster_path}">
      <div class="card-info">${m.title||m.name}<br>
        <span onclick="removeFromList(${m.id})" style="cursor:pointer;font-size:12px">‚ùå Remove</span>
      </div>`;
    r.appendChild(c);
  });
}

async function openModal(m,isTV){
  const v=await get(`${API}/${isTV?'tv':'movie'}/${m.id}/videos?api_key=${KEY}`);
  const t=v.results.find(x=>x.site==='YouTube');
  trailer.src=t?`https://www.youtube.com/embed/${t.key}`:'';
  modal.style.display='flex';
}
function closeModal(){modal.style.display='none';trailer.src=''}

init();
</script>
</body>
</html>
